function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n=globalThis.parcelRequire0bb8,r=n.register;r("fjiLn",function(t,r){Object.defineProperty(t.exports,"__esModule",{value:!0,configurable:!0}),e(t.exports,"default",()=>l);var o=n("1l9KS"),i=n("bEWqL"),a=n("lqD1Z"),c=n("9M555"),s=n("hJg9G"),u=n("8jlY4"),l=(0,o.compose)((0,i.connect)(function(e,t){var n=t.windowId;return{canvases:(0,s.getCanvases)(e,{windowId:n}),viewingDirection:(0,u.getSequenceViewingDirection)(e,{windowId:n})}}),(0,a.withPlugins)("GalleryView"))(c.GalleryView)}),r("9M555",function(t,r){e(t.exports,"GalleryView",()=>d);var o=n("dm060"),i=n("37zHU"),a=n("c9wxR"),c=n("bjaEB"),s=n("9L45J");function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=(0,i.default)(a.default,{name:"GalleryView",slot:"root"})(function(e){return e.theme,{alignItems:"flex-start",display:"flex",flexDirection:"row",flexWrap:"wrap",overflowX:"hidden",overflowY:"scroll",padding:"50px 0 50px 20px",width:"100%"}}),d=/*#__PURE__*/function(e){var t;function n(){var e,t;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),e=n,t=arguments,e=l(e),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,u()?Reflect.construct(e,t||[],l(this).constructor):e.apply(this,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(n,e),t=[{key:"render",value:function(){var e=this.props,t=e.canvases,n=e.viewingDirection,r=e.windowId;return/*#__PURE__*/(0,s.jsx)(p,{component:"section","aria-label":"gallery section",dir:"right-to-left"===n?"rtl":"ltr",square:!0,elevation:0,id:"".concat(r,"-gallery"),children:t.map(function(e){return/*#__PURE__*/(0,s.jsx)(c.default,{windowId:r,canvas:e},e.id)})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r.key),r)}}(n.prototype,t),Object.defineProperty(n,"prototype",{writable:!1}),n}(o.Component);d.defaultProps={viewingDirection:""}}),r("bjaEB",function(r,o){e(r.exports,"default",()=>y);var i=n("1l9KS"),a=n("bEWqL"),c=n("dPHLq"),s=n("g60ed"),u=n("3LSJh"),l=n("cOFmZ"),f=n("8uJ99"),p=n("hJg9G"),d=n("bdEuo"),h=n("lmpGm"),y=(0,i.compose)((0,a.connect)(function(e,n){var r=n.canvas,o=n.windowId,i=(0,p.getCurrentCanvas)(e,{windowId:o}),a=(0,h.getSearchAnnotationsForWindow)(e,{windowId:o}),s=/*@__PURE__*/t(c)(a.map(function(e){return e.resources})).filter(function(e){return e.targetId===r.id}),u=(0,l.getCompanionWindowsForContent)(e,{content:"annotations",windowId:o}).length>0;return{annotationsCount:function(){if(u)return(0,d.getPresentAnnotationsOnSelectedCanvases)(e,{canvasId:r.id}).reduce(function(e,t){return e+t.resources.filter(function(e){return e.targetId===r.id}).length},0)}(),config:(0,f.getConfig)(e).galleryView,searchAnnotationsCount:s.length,selected:i&&i.id===r.id}},function(e,t){var n=t.canvas,r=(t.id,t.windowId);return{focusOnCanvas:function(){return e(s.setWindowViewType(r,"single"))},requestCanvasAnnotations:function(){return e(s.requestCanvasAnnotations(r,n.id))},setCanvas:function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return e(s.setCanvas.apply(s,[r].concat(n)))}}}))(u.GalleryViewThumbnail)}),r("3LSJh",function(r,o){e(r.exports,"GalleryViewThumbnail",()=>O);var i=n("dm060"),a=n("37zHU"),c=n("3cECp"),s=n("5tjAz"),u=n("dDkOL"),l=n("6Wb8J"),f=n("aG6hj"),p=n("9L45J");function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=g(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function g(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}var w=(0,a.default)("div",{name:"GalleryView",slot:"thumbnail"})(function(e){var t=e.ownerState,n=e.theme;return v(v(v({"&:focus":{outline:"none"},"&:hover":{backgroundColor:n.palette.action.hover},border:"2px solid transparent"},t.selected&&{borderColor:n.palette.primary.main}),!t.selected&&t.searchAnnotationsCount>0&&{borderColor:n.palette.action.selected}),{},{cursor:"pointer",display:"inline-block",margin:n.spacing(1,.5),maxHeight:t.config.height+45,minWidth:"60px",overflow:"hidden",padding:n.spacing(.5),position:"relative",width:"min-content"})}),m=(0,a.default)("div",{name:"GalleryView",slot:"chipArea"})(function(e){return{display:"flex",flexDirection:"column",gap:e.theme.spacing(.25),position:"absolute",right:0,top:0}}),j=(0,a.default)(c.default,{name:"GalleryView",slot:"chip"})(function(e){return{backgroundColor:e.theme.palette.annotations.chipBackground,opacity:.875,textAlign:"right"}}),O=/*#__PURE__*/function(e){var n;function r(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,r),n=r,o=[e],n=h(n),(t=function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,d()?Reflect.construct(n,o||[],h(this).constructor):n.apply(this,o))).myRef=/*#__PURE__*/(0,i.createRef)(),t.state={requestedAnnotations:!1},t.handleSelect=t.handleSelect.bind(t),t.handleKey=t.handleKey.bind(t),t.handleIntersection=t.handleIntersection.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(r,e),n=[{key:"componentDidMount",value:function(){var e;this.props.selected&&(null===(e=this.myRef.current)||void 0===e||e.scrollIntoView(!0))}},{key:"handleSelect",value:function(){var e=this.props,t=e.canvas,n=e.selected,r=e.setCanvas,o=e.focusOnCanvas;n?o():r(t.id)}},{key:"handleKey",value:function(e){var t=this.props,n=t.canvas,r=t.setCanvas,o=t.focusOnCanvas;this.keys={enter:"Enter",space:" "},this.chars={enter:13,space:32},e.key===this.keys.enter||e.which===this.chars.enter||e.key===this.keys.space||e.which===this.chars.space?o():r(n.id)}},{key:"handleIntersection",value:function(e,t){var n=t.isIntersecting,r=this.props,o=r.annotationsCount,i=r.requestCanvasAnnotations,a=this.state.requestedAnnotations;!n||void 0===o||o>0||a||(this.setState({requestedAnnotations:!0}),i())}},{key:"render",value:function(){var e=this.props,n=e.annotationsCount,r=e.searchAnnotationsCount,o=e.canvas,i=e.config,a=e.selected;return/*#__PURE__*/(0,p.jsx)(l.InView,{onChange:this.handleIntersection,children:/*#__PURE__*/(0,p.jsx)(w,{ownerState:this.props,className:a?"selected":"",onClick:this.handleSelect,onKeyUp:this.handleKey,ref:this.myRef,role:"button",tabIndex:0,children:/*#__PURE__*/(0,p.jsx)(f.default,{resource:o,labelled:!0,variant:"outside",maxHeight:i.height,maxWidth:i.width,children:/*#__PURE__*/(0,p.jsxs)(m,{children:[r>0&&/*#__PURE__*/(0,p.jsx)(j,{icon:/*#__PURE__*/(0,p.jsx)(/*@__PURE__*/t(u),{fontSize:"small"}),label:r,size:"small"}),n>0&&/*#__PURE__*/(0,p.jsx)(j,{icon:/*#__PURE__*/(0,p.jsx)(/*@__PURE__*/t(s),{fontSize:"small"}),label:n,size:"small"})]})})},o.id||o.index)})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r}(i.Component);O.defaultProps={annotationsCount:void 0,config:{height:100,width:null},requestCanvasAnnotations:function(){},searchAnnotationsCount:0,selected:!1}});
//# sourceMappingURL=GalleryView.af5999ef.js.map
