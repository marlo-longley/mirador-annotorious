{"mappings":"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","sources":["node_modules/@parcel/runtime-browser-hmr/lib/runtime-9fe1ae2bd61b91f5.js","node_modules/@parcel/runtime-react-refresh/lib/runtime-402a68cf08055057.js","node_modules/mirador/dist/es/src/containers/OpenSeadragonViewer.js","node_modules/mirador/dist/es/src/components/OpenSeadragonViewer.js","node_modules/mirador/dist/es/src/containers/AnnotationsOverlay.js","node_modules/mirador/dist/es/src/components/AnnotationsOverlay.js","node_modules/lodash/sortBy.js","node_modules/lodash/_baseOrderBy.js","node_modules/lodash/_baseMap.js","node_modules/lodash/_baseSortBy.js","node_modules/lodash/_compareMultiple.js","node_modules/lodash/_compareAscending.js","node_modules/lodash/_isIterateeCall.js","node_modules/lodash/xor.js","node_modules/lodash/_baseXor.js","node_modules/mirador/dist/es/src/lib/OpenSeadragonCanvasOverlay.js","node_modules/mirador/dist/es/src/lib/CanvasAnnotationDisplay.js"],"sourcesContent":["var HMR_HOST = null;var HMR_PORT = null;var HMR_SECURE = false;var HMR_ENV_HASH = \"d6ea1d42532a7575\";var HMR_USE_SSE = false;module.bundle.HMR_BUNDLE_ID = \"0ca2c271570eae9d\";\"use strict\";\n\n/* global HMR_HOST, HMR_PORT, HMR_ENV_HASH, HMR_SECURE, HMR_USE_SSE, chrome, browser, __parcel__import__, __parcel__importScripts__, ServiceWorkerGlobalScope */\n/*::\nimport type {\n  HMRAsset,\n  HMRMessage,\n} from '@parcel/reporter-dev-server/src/HMRServer.js';\ninterface ParcelRequire {\n  (string): mixed;\n  cache: {|[string]: ParcelModule|};\n  hotData: {|[string]: mixed|};\n  Module: any;\n  parent: ?ParcelRequire;\n  isParcelRequire: true;\n  modules: {|[string]: [Function, {|[string]: string|}]|};\n  HMR_BUNDLE_ID: string;\n  root: ParcelRequire;\n}\ninterface ParcelModule {\n  hot: {|\n    data: mixed,\n    accept(cb: (Function) => void): void,\n    dispose(cb: (mixed) => void): void,\n    // accept(deps: Array<string> | string, cb: (Function) => void): void,\n    // decline(): void,\n    _acceptCallbacks: Array<(Function) => void>,\n    _disposeCallbacks: Array<(mixed) => void>,\n  |};\n}\ninterface ExtensionContext {\n  runtime: {|\n    reload(): void,\n    getURL(url: string): string;\n    getManifest(): {manifest_version: number, ...};\n  |};\n}\ndeclare var module: {bundle: ParcelRequire, ...};\ndeclare var HMR_HOST: string;\ndeclare var HMR_PORT: string;\ndeclare var HMR_ENV_HASH: string;\ndeclare var HMR_SECURE: boolean;\ndeclare var HMR_USE_SSE: boolean;\ndeclare var chrome: ExtensionContext;\ndeclare var browser: ExtensionContext;\ndeclare var __parcel__import__: (string) => Promise<void>;\ndeclare var __parcel__importScripts__: (string) => Promise<void>;\ndeclare var globalThis: typeof self;\ndeclare var ServiceWorkerGlobalScope: Object;\n*/\nvar OVERLAY_ID = '__parcel__error__overlay__';\nvar OldModule = module.bundle.Module;\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData[moduleName],\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n  module.bundle.hotData[moduleName] = undefined;\n}\nmodule.bundle.Module = Module;\nmodule.bundle.hotData = {};\nvar checkedAssets /*: {|[string]: boolean|} */, assetsToDispose /*: Array<[ParcelRequire, string]> */, assetsToAccept /*: Array<[ParcelRequire, string]> */;\n\nfunction getHostname() {\n  return HMR_HOST || (location.protocol.indexOf('http') === 0 ? location.hostname : 'localhost');\n}\nfunction getPort() {\n  return HMR_PORT || location.port;\n}\n\n// eslint-disable-next-line no-redeclare\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = getHostname();\n  var port = getPort();\n  var protocol = HMR_SECURE || location.protocol == 'https:' && !['localhost', '127.0.0.1', '0.0.0.0'].includes(hostname) ? 'wss' : 'ws';\n  var ws;\n  if (HMR_USE_SSE) {\n    ws = new EventSource('/__parcel_hmr');\n  } else {\n    try {\n      ws = new WebSocket(protocol + '://' + hostname + (port ? ':' + port : '') + '/');\n    } catch (err) {\n      if (err.message) {\n        console.error(err.message);\n      }\n      ws = {};\n    }\n  }\n\n  // Web extension context\n  var extCtx = typeof browser === 'undefined' ? typeof chrome === 'undefined' ? null : chrome : browser;\n\n  // Safari doesn't support sourceURL in error stacks.\n  // eval may also be disabled via CSP, so do a quick check.\n  var supportsSourceURL = false;\n  try {\n    (0, eval)('throw new Error(\"test\"); //# sourceURL=test.js');\n  } catch (err) {\n    supportsSourceURL = err.stack.includes('test.js');\n  }\n\n  // $FlowFixMe\n  ws.onmessage = async function (event /*: {data: string, ...} */) {\n    checkedAssets = {} /*: {|[string]: boolean|} */;\n    assetsToAccept = [];\n    assetsToDispose = [];\n    var data /*: HMRMessage */ = JSON.parse(event.data);\n    if (data.type === 'update') {\n      // Remove error overlay if there is one\n      if (typeof document !== 'undefined') {\n        removeErrorOverlay();\n      }\n      let assets = data.assets.filter(asset => asset.envHash === HMR_ENV_HASH);\n\n      // Handle HMR Update\n      let handled = assets.every(asset => {\n        return asset.type === 'css' || asset.type === 'js' && hmrAcceptCheck(module.bundle.root, asset.id, asset.depsByBundle);\n      });\n      if (handled) {\n        console.clear();\n\n        // Dispatch custom event so other runtimes (e.g React Refresh) are aware.\n        if (typeof window !== 'undefined' && typeof CustomEvent !== 'undefined') {\n          window.dispatchEvent(new CustomEvent('parcelhmraccept'));\n        }\n        await hmrApplyUpdates(assets);\n\n        // Dispose all old assets.\n        let processedAssets = {} /*: {|[string]: boolean|} */;\n        for (let i = 0; i < assetsToDispose.length; i++) {\n          let id = assetsToDispose[i][1];\n          if (!processedAssets[id]) {\n            hmrDispose(assetsToDispose[i][0], id);\n            processedAssets[id] = true;\n          }\n        }\n\n        // Run accept callbacks. This will also re-execute other disposed assets in topological order.\n        processedAssets = {};\n        for (let i = 0; i < assetsToAccept.length; i++) {\n          let id = assetsToAccept[i][1];\n          if (!processedAssets[id]) {\n            hmrAccept(assetsToAccept[i][0], id);\n            processedAssets[id] = true;\n          }\n        }\n      } else fullReload();\n    }\n    if (data.type === 'error') {\n      // Log parcel errors to console\n      for (let ansiDiagnostic of data.diagnostics.ansi) {\n        let stack = ansiDiagnostic.codeframe ? ansiDiagnostic.codeframe : ansiDiagnostic.stack;\n        console.error(' [parcel]: ' + ansiDiagnostic.message + '\\n' + stack + '\\n\\n' + ansiDiagnostic.hints.join('\\n'));\n      }\n      if (typeof document !== 'undefined') {\n        // Render the fancy html overlay\n        removeErrorOverlay();\n        var overlay = createErrorOverlay(data.diagnostics.html);\n        // $FlowFixMe\n        document.body.appendChild(overlay);\n      }\n    }\n  };\n  if (ws instanceof WebSocket) {\n    ws.onerror = function (e) {\n      if (e.message) {\n        console.error(e.message);\n      }\n    };\n    ws.onclose = function () {\n      console.warn('[parcel]  Connection to the HMR server was lost');\n    };\n  }\n}\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n    console.log('[parcel]  Error resolved');\n  }\n}\nfunction createErrorOverlay(diagnostics) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n  let errorHTML = '<div style=\"background: black; opacity: 0.85; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; font-family: Menlo, Consolas, monospace; z-index: 9999;\">';\n  for (let diagnostic of diagnostics) {\n    let stack = diagnostic.frames.length ? diagnostic.frames.reduce((p, frame) => {\n      return `${p}\n<a href=\"/__parcel_launch_editor?file=${encodeURIComponent(frame.location)}\" style=\"text-decoration: underline; color: #888\" onclick=\"fetch(this.href); return false\">${frame.location}</a>\n${frame.code}`;\n    }, '') : diagnostic.stack;\n    errorHTML += `\n      <div>\n        <div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">\n           ${diagnostic.message}\n        </div>\n        <pre>${stack}</pre>\n        <div>\n          ${diagnostic.hints.map(hint => '<div> ' + hint + '</div>').join('')}\n        </div>\n        ${diagnostic.documentation ? `<div> <a style=\"color: violet\" href=\"${diagnostic.documentation}\" target=\"_blank\">Learn more</a></div>` : ''}\n      </div>\n    `;\n  }\n  errorHTML += '</div>';\n  overlay.innerHTML = errorHTML;\n  return overlay;\n}\nfunction fullReload() {\n  if ('reload' in location) {\n    location.reload();\n  } else if (extCtx && extCtx.runtime && extCtx.runtime.reload) {\n    extCtx.runtime.reload();\n  }\n}\nfunction getParents(bundle, id) /*: Array<[ParcelRequire, string]> */{\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n  var parents = [];\n  var k, d, dep;\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || Array.isArray(dep) && dep[dep.length - 1] === id) {\n        parents.push([bundle, k]);\n      }\n    }\n  }\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n  return parents;\n}\nfunction updateLink(link) {\n  var href = link.getAttribute('href');\n  if (!href) {\n    return;\n  }\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    if (link.parentNode !== null) {\n      // $FlowFixMe\n      link.parentNode.removeChild(link);\n    }\n  };\n  newLink.setAttribute('href',\n  // $FlowFixMe\n  href.split('?')[0] + '?' + Date.now());\n  // $FlowFixMe\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      // $FlowFixMe[incompatible-type]\n      var href /*: string */ = links[i].getAttribute('href');\n      var hostname = getHostname();\n      var servedFromHMRServer = hostname === 'localhost' ? new RegExp('^(https?:\\\\/\\\\/(0.0.0.0|127.0.0.1)|localhost):' + getPort()).test(href) : href.indexOf(hostname + ':' + getPort());\n      var absolute = /^https?:\\/\\//i.test(href) && href.indexOf(location.origin) !== 0 && !servedFromHMRServer;\n      if (!absolute) {\n        updateLink(links[i]);\n      }\n    }\n    cssTimeout = null;\n  }, 50);\n}\nfunction hmrDownload(asset) {\n  if (asset.type === 'js') {\n    if (typeof document !== 'undefined') {\n      let script = document.createElement('script');\n      script.src = asset.url + '?t=' + Date.now();\n      if (asset.outputFormat === 'esmodule') {\n        script.type = 'module';\n      }\n      return new Promise((resolve, reject) => {\n        var _document$head;\n        script.onload = () => resolve(script);\n        script.onerror = reject;\n        (_document$head = document.head) === null || _document$head === void 0 || _document$head.appendChild(script);\n      });\n    } else if (typeof importScripts === 'function') {\n      // Worker scripts\n      if (asset.outputFormat === 'esmodule') {\n        return __parcel__import__(asset.url + '?t=' + Date.now());\n      } else {\n        return new Promise((resolve, reject) => {\n          try {\n            __parcel__importScripts__(asset.url + '?t=' + Date.now());\n            resolve();\n          } catch (err) {\n            reject(err);\n          }\n        });\n      }\n    }\n  }\n}\nasync function hmrApplyUpdates(assets) {\n  global.parcelHotUpdate = Object.create(null);\n  let scriptsToRemove;\n  try {\n    // If sourceURL comments aren't supported in eval, we need to load\n    // the update from the dev server over HTTP so that stack traces\n    // are correct in errors/logs. This is much slower than eval, so\n    // we only do it if needed (currently just Safari).\n    // https://bugs.webkit.org/show_bug.cgi?id=137297\n    // This path is also taken if a CSP disallows eval.\n    if (!supportsSourceURL) {\n      let promises = assets.map(asset => {\n        var _hmrDownload;\n        return (_hmrDownload = hmrDownload(asset)) === null || _hmrDownload === void 0 ? void 0 : _hmrDownload.catch(err => {\n          // Web extension fix\n          if (extCtx && extCtx.runtime && extCtx.runtime.getManifest().manifest_version == 3 && typeof ServiceWorkerGlobalScope != 'undefined' && global instanceof ServiceWorkerGlobalScope) {\n            extCtx.runtime.reload();\n            return;\n          }\n          throw err;\n        });\n      });\n      scriptsToRemove = await Promise.all(promises);\n    }\n    assets.forEach(function (asset) {\n      hmrApply(module.bundle.root, asset);\n    });\n  } finally {\n    delete global.parcelHotUpdate;\n    if (scriptsToRemove) {\n      scriptsToRemove.forEach(script => {\n        if (script) {\n          var _document$head2;\n          (_document$head2 = document.head) === null || _document$head2 === void 0 || _document$head2.removeChild(script);\n        }\n      });\n    }\n  }\n}\nfunction hmrApply(bundle /*: ParcelRequire */, asset /*:  HMRAsset */) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (asset.type === 'css') {\n    reloadCSS();\n  } else if (asset.type === 'js') {\n    let deps = asset.depsByBundle[bundle.HMR_BUNDLE_ID];\n    if (deps) {\n      if (modules[asset.id]) {\n        // Remove dependencies that are removed and will become orphaned.\n        // This is necessary so that if the asset is added back again, the cache is gone, and we prevent a full page reload.\n        let oldDeps = modules[asset.id][1];\n        for (let dep in oldDeps) {\n          if (!deps[dep] || deps[dep] !== oldDeps[dep]) {\n            let id = oldDeps[dep];\n            let parents = getParents(module.bundle.root, id);\n            if (parents.length === 1) {\n              hmrDelete(module.bundle.root, id);\n            }\n          }\n        }\n      }\n      if (supportsSourceURL) {\n        // Global eval. We would use `new Function` here but browser\n        // support for source maps is better with eval.\n        (0, eval)(asset.output);\n      }\n\n      // $FlowFixMe\n      let fn = global.parcelHotUpdate[asset.id];\n      modules[asset.id] = [fn, deps];\n    } else if (bundle.parent) {\n      hmrApply(bundle.parent, asset);\n    }\n  }\n}\nfunction hmrDelete(bundle, id) {\n  let modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (modules[id]) {\n    // Collect dependencies that will become orphaned when this module is deleted.\n    let deps = modules[id][1];\n    let orphans = [];\n    for (let dep in deps) {\n      let parents = getParents(module.bundle.root, deps[dep]);\n      if (parents.length === 1) {\n        orphans.push(deps[dep]);\n      }\n    }\n\n    // Delete the module. This must be done before deleting dependencies in case of circular dependencies.\n    delete modules[id];\n    delete bundle.cache[id];\n\n    // Now delete the orphans.\n    orphans.forEach(id => {\n      hmrDelete(module.bundle.root, id);\n    });\n  } else if (bundle.parent) {\n    hmrDelete(bundle.parent, id);\n  }\n}\nfunction hmrAcceptCheck(bundle /*: ParcelRequire */, id /*: string */, depsByBundle /*: ?{ [string]: { [string]: string } }*/) {\n  if (hmrAcceptCheckOne(bundle, id, depsByBundle)) {\n    return true;\n  }\n\n  // Traverse parents breadth first. All possible ancestries must accept the HMR update, or we'll reload.\n  let parents = getParents(module.bundle.root, id);\n  let accepted = false;\n  while (parents.length > 0) {\n    let v = parents.shift();\n    let a = hmrAcceptCheckOne(v[0], v[1], null);\n    if (a) {\n      // If this parent accepts, stop traversing upward, but still consider siblings.\n      accepted = true;\n    } else {\n      // Otherwise, queue the parents in the next level upward.\n      let p = getParents(module.bundle.root, v[1]);\n      if (p.length === 0) {\n        // If there are no parents, then we've reached an entry without accepting. Reload.\n        accepted = false;\n        break;\n      }\n      parents.push(...p);\n    }\n  }\n  return accepted;\n}\nfunction hmrAcceptCheckOne(bundle /*: ParcelRequire */, id /*: string */, depsByBundle /*: ?{ [string]: { [string]: string } }*/) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (depsByBundle && !depsByBundle[bundle.HMR_BUNDLE_ID]) {\n    // If we reached the root bundle without finding where the asset should go,\n    // there's nothing to do. Mark as \"accepted\" so we don't reload the page.\n    if (!bundle.parent) {\n      return true;\n    }\n    return hmrAcceptCheck(bundle.parent, id, depsByBundle);\n  }\n  if (checkedAssets[id]) {\n    return true;\n  }\n  checkedAssets[id] = true;\n  var cached = bundle.cache[id];\n  assetsToDispose.push([bundle, id]);\n  if (!cached || cached.hot && cached.hot._acceptCallbacks.length) {\n    assetsToAccept.push([bundle, id]);\n    return true;\n  }\n}\nfunction hmrDispose(bundle /*: ParcelRequire */, id /*: string */) {\n  var cached = bundle.cache[id];\n  bundle.hotData[id] = {};\n  if (cached && cached.hot) {\n    cached.hot.data = bundle.hotData[id];\n  }\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData[id]);\n    });\n  }\n  delete bundle.cache[id];\n}\nfunction hmrAccept(bundle /*: ParcelRequire */, id /*: string */) {\n  // Execute the module.\n  bundle(id);\n\n  // Run the accept callbacks in the new version of the module.\n  var cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      var assetsToAlsoAccept = cb(function () {\n        return getParents(module.bundle.root, id);\n      });\n      if (assetsToAlsoAccept && assetsToAccept.length) {\n        assetsToAlsoAccept.forEach(function (a) {\n          hmrDispose(a[0], a[1]);\n        });\n\n        // $FlowFixMe[method-unbinding]\n        assetsToAccept.push.apply(assetsToAccept, assetsToAlsoAccept);\n      }\n    });\n  }\n}","\nvar Refresh = require('react-refresh/runtime');\nvar ErrorOverlay = require('react-error-overlay');\n\nRefresh.injectIntoGlobalHook(window);\nwindow.$RefreshReg$ = function() {};\nwindow.$RefreshSig$ = function() {\n  return function(type) {\n    return type;\n  };\n};\n\nErrorOverlay.setEditorHandler(function editorHandler(errorLocation) {\n  let file = `${errorLocation.fileName}:${errorLocation.lineNumber || 1}:${errorLocation.colNumber || 1}`;\n  fetch(`/__parcel_launch_editor?file=${encodeURIComponent(file)}`);\n});\n\nErrorOverlay.startReportingRuntimeErrors({\n  onError: function () {},\n});\n\nwindow.addEventListener('parcelhmraccept', () => {\n  ErrorOverlay.dismissRuntimeErrors();\n});\n","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport flatten from 'lodash/flatten';\nimport { withPlugins } from '../extend/withPlugins';\nimport { OpenSeadragonViewer } from '../components/OpenSeadragonViewer';\nimport * as actions from '../state/actions';\nimport { getVisibleCanvasNonTiledResources, getCurrentCanvas, getCanvasLabel, getViewer, getConfig, getCompanionWindowsForContent, selectInfoResponses, getCurrentCanvasWorld } from '../state/selectors';\n\n/**\n * mapStateToProps - used to hook up connect to action creators\n * @memberof Window\n * @private\n */\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  var canvasWorld = getCurrentCanvasWorld(state, {\n    windowId: windowId\n  });\n  var infoResponses = selectInfoResponses(state);\n  var imageServiceIds = flatten(canvasWorld.canvases.map(function (c) {\n    return c.imageServiceIds;\n  }));\n  return {\n    canvasWorld: canvasWorld,\n    drawAnnotations: getConfig(state).window.forceDrawAnnotations || getCompanionWindowsForContent(state, {\n      content: 'annotations',\n      windowId: windowId\n    }).length > 0 || getCompanionWindowsForContent(state, {\n      content: 'search',\n      windowId: windowId\n    }).length > 0,\n    infoResponses: imageServiceIds.map(function (id) {\n      return infoResponses[id];\n    }).filter(function (infoResponse) {\n      return infoResponse !== undefined && infoResponse.isFetching === false && infoResponse.error === undefined;\n    }),\n    label: getCanvasLabel(state, {\n      canvasId: (getCurrentCanvas(state, {\n        windowId: windowId\n      }) || {}).id,\n      windowId: windowId\n    }),\n    nonTiledImages: getVisibleCanvasNonTiledResources(state, {\n      windowId: windowId\n    }),\n    osdConfig: getConfig(state).osdConfig,\n    viewerConfig: getViewer(state, {\n      windowId: windowId\n    })\n  };\n};\n\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestListItem\n * @private\n */\nvar mapDispatchToProps = {\n  updateViewport: actions.updateViewport\n};\nvar enhance = compose(withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('OpenSeadragonViewer'));\nexport default enhance(OpenSeadragonViewer);","function _construct(t, e, r) { if (_isNativeReflectConstruct()) return Reflect.construct.apply(null, arguments); var o = [null]; o.push.apply(o, e); var p = new (t.bind.apply(t, o))(); return r && _setPrototypeOf(p, r.prototype), p; }\nfunction _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _iterableToArray(r) { if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(t, e) { if (e && (\"object\" == typeof e || \"function\" == typeof e)) return e; if (void 0 !== e) throw new TypeError(\"Derived constructors may only return object or undefined\"); return _assertThisInitialized(t); }\nfunction _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); return e; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }\nfunction _inherits(t, e) { if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function\"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, \"prototype\", { writable: !1 }), e && _setPrototypeOf(t, e); }\nfunction _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\nimport { createRef, Children, cloneElement, Component } from 'react';\nimport { styled } from '@mui/material/styles';\nimport debounce from 'lodash/debounce';\nimport isEqual from 'lodash/isEqual';\nimport OpenSeadragon from 'openseadragon';\nimport classNames from 'classnames';\nimport ns from '../config/css-ns';\nimport AnnotationsOverlay from '../containers/AnnotationsOverlay';\nimport CanvasWorld from '../lib/CanvasWorld';\nimport { PluginHook } from './PluginHook';\nimport { OSDReferences } from '../plugins/OSDReferences';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar StyledSection = styled('section')({\n  cursor: 'grab',\n  flex: 1,\n  position: 'relative'\n});\n/**\n * Represents a OpenSeadragonViewer in the mirador workspace. Responsible for mounting\n * and rendering OSD.\n */\nexport var OpenSeadragonViewer = /*#__PURE__*/function (_Component) {\n  /**\n   * @param {Object} props\n   */\n  function OpenSeadragonViewer(props) {\n    var _this;\n    _classCallCheck(this, OpenSeadragonViewer);\n    _this = _callSuper(this, OpenSeadragonViewer, [props]);\n    _this.state = {\n      grabbing: false,\n      viewer: undefined\n    };\n    _this.ref = /*#__PURE__*/createRef();\n    _this.apiRef = /*#__PURE__*/createRef();\n    OSDReferences.set(props.windowId, _this.apiRef);\n    _this.onCanvasMouseMove = debounce(_this.onCanvasMouseMove.bind(_this), 10);\n    _this.onViewportChange = _this.onViewportChange.bind(_this);\n    _this.zoomToWorld = _this.zoomToWorld.bind(_this);\n    _this.osdUpdating = false;\n    return _this;\n  }\n\n  /**\n   * React lifecycle event\n   */\n  _inherits(OpenSeadragonViewer, _Component);\n  return _createClass(OpenSeadragonViewer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n      var _this$props = this.props,\n        osdConfig = _this$props.osdConfig,\n        t = _this$props.t,\n        windowId = _this$props.windowId;\n      if (!this.ref.current) {\n        return;\n      }\n      var viewer = new OpenSeadragon(_objectSpread({\n        id: this.ref.current.id\n      }, osdConfig));\n      var canvas = viewer.canvas && viewer.canvas.firstElementChild;\n      if (canvas) {\n        canvas.setAttribute('role', 'img');\n        canvas.setAttribute('aria-label', t('digitizedView'));\n        canvas.setAttribute('aria-describedby', \"\".concat(windowId, \"-osd\"));\n      }\n      this.apiRef.current = viewer;\n      this.setState({\n        viewer: viewer\n      });\n      viewer.addHandler('canvas-drag', function () {\n        _this2.setState({\n          grabbing: true\n        });\n      });\n      viewer.addHandler('canvas-drag-end', function () {\n        _this2.setState({\n          grabbing: false\n        });\n      });\n\n      // Set a flag when OSD starts animating (so that viewer updates are not used)\n      viewer.addHandler('animation-start', function () {\n        _this2.osdUpdating = true;\n      });\n      viewer.addHandler('animation-finish', this.onViewportChange);\n      viewer.addHandler('animation-finish', function () {\n        _this2.osdUpdating = false;\n      });\n      if (viewer.innerTracker) {\n        viewer.innerTracker.moveHandler = this.onCanvasMouseMove;\n      }\n    }\n\n    /**\n     * When the tileSources change, make sure to close the OSD viewer.\n     * When the annotations change, reset the updateCanvas method to make sure\n     * they are added.\n     * When the viewport state changes, pan or zoom the OSD viewer as appropriate\n     */\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _this$props2 = this.props,\n        viewerConfig = _this$props2.viewerConfig,\n        canvasWorld = _this$props2.canvasWorld;\n      var viewer = this.state.viewer;\n      this.apiRef.current = viewer;\n      if (prevState.viewer === undefined) {\n        if (viewerConfig) {\n          viewer.viewport.panTo(viewerConfig, true);\n          viewer.viewport.zoomTo(viewerConfig.zoom, viewerConfig, true);\n          viewerConfig.degrees !== undefined && viewer.viewport.setRotation(viewerConfig.degrees);\n          viewerConfig.flip !== undefined && viewer.viewport.setFlip(viewerConfig.flip);\n        }\n        this.addAllImageSources(!viewerConfig);\n        return;\n      }\n      if (!this.infoResponsesMatch(prevProps.infoResponses) || !this.nonTiledImagedMatch(prevProps.nonTiledImages)) {\n        viewer.close();\n        var canvasesChanged = !isEqual(canvasWorld.canvasIds, prevProps.canvasWorld.canvasIds);\n        if (canvasesChanged && viewer.preserveViewport) {\n          // Do not reset the zoom after add\n          this.addAllImageSources(false);\n        } else {\n          // Reset the zoom if the canvas has changed or if there is no viewerConfig\n          this.addAllImageSources(canvasesChanged || !viewerConfig);\n        }\n      } else if (!isEqual(canvasWorld.layers, prevProps.canvasWorld.layers)) {\n        this.refreshTileProperties();\n      } else if (viewerConfig && !this.osdUpdating) {\n        var viewport = viewer.viewport;\n        if (viewerConfig.x !== viewport.centerSpringX.target.value || viewerConfig.y !== viewport.centerSpringY.target.value) {\n          viewport.panTo(viewerConfig, false);\n        }\n        if (viewerConfig.zoom !== viewport.zoomSpring.target.value) {\n          viewport.zoomTo(viewerConfig.zoom, viewerConfig, false);\n        }\n        if (viewerConfig.rotation !== viewport.getRotation()) {\n          viewport.setRotation(viewerConfig.rotation);\n        }\n        if (viewerConfig.flip !== viewport.getFlip()) {\n          viewport.setFlip(viewerConfig.flip);\n        }\n      }\n    }\n\n    /**\n     */\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var viewer = this.state.viewer;\n      if (viewer.innerTracker && viewer.innerTracker.moveHandler === this.onCanvasMouseMove) {\n        viewer.innerTracker.moveHandler = null;\n      }\n      viewer.removeAllHandlers();\n      this.onCanvasMouseMove.cancel();\n      this.apiRef.current = undefined;\n    }\n\n    /** Shim to provide a mouse-move event coming from the viewer */\n  }, {\n    key: \"onCanvasMouseMove\",\n    value: function onCanvasMouseMove(event) {\n      var viewer = this.state.viewer;\n      viewer.raiseEvent('mouse-move', event);\n    }\n\n    /**\n     * Forward OSD state to redux\n     */\n  }, {\n    key: \"onViewportChange\",\n    value: function onViewportChange(event) {\n      var _this$props3 = this.props,\n        updateViewport = _this$props3.updateViewport,\n        windowId = _this$props3.windowId;\n      var viewport = event.eventSource.viewport;\n      updateViewport(windowId, {\n        flip: viewport.getFlip(),\n        rotation: viewport.getRotation(),\n        x: Math.round(viewport.centerSpringX.target.value),\n        y: Math.round(viewport.centerSpringY.target.value),\n        zoom: viewport.zoomSpring.target.value\n      });\n    }\n\n    /** */\n  }, {\n    key: \"addAllImageSources\",\n    value: function addAllImageSources() {\n      var _this3 = this;\n      var zoomAfterAdd = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var _this$props4 = this.props,\n        nonTiledImages = _this$props4.nonTiledImages,\n        infoResponses = _this$props4.infoResponses;\n      return Promise.allSettled([].concat(_toConsumableArray(infoResponses.map(function (infoResponse) {\n        return _this3.addTileSource(infoResponse);\n      })), _toConsumableArray(nonTiledImages.map(function (image) {\n        return _this3.addNonTiledImage(image);\n      })))).then(function () {\n        if (infoResponses[0] || nonTiledImages[0]) {\n          if (zoomAfterAdd) _this3.zoomToWorld();\n          _this3.refreshTileProperties();\n        }\n      });\n    }\n\n    /** */\n  }, {\n    key: \"addNonTiledImage\",\n    value: function addNonTiledImage(contentResource) {\n      var canvasWorld = this.props.canvasWorld;\n      var viewer = this.state.viewer;\n      var type = contentResource.getProperty('type');\n      var format = contentResource.getProperty('format') || '';\n      if (!(type === 'Image' || type === 'dctypes:Image' || format.startsWith('image/'))) return Promise.resolve();\n      return new Promise(function (resolve, reject) {\n        resolve(viewer.addSimpleImage({\n          error: function error(event) {\n            return reject(event);\n          },\n          fitBounds: _construct(OpenSeadragon.Rect, _toConsumableArray(canvasWorld.contentResourceToWorldCoordinates(contentResource))),\n          index: canvasWorld.layerIndexOfImageResource(contentResource),\n          opacity: canvasWorld.layerOpacityOfImageResource(contentResource),\n          success: function success(event) {\n            return resolve(event);\n          },\n          url: contentResource.id\n        }));\n      });\n    }\n\n    /**\n     */\n  }, {\n    key: \"addTileSource\",\n    value: function addTileSource(infoResponse) {\n      var canvasWorld = this.props.canvasWorld;\n      var viewer = this.state.viewer;\n      return new Promise(function (resolve, reject) {\n        // OSD mutates this object, so we give it a shallow copy\n        var tileSource = _objectSpread({}, infoResponse.json);\n        var contentResource = canvasWorld.contentResource(infoResponse.id);\n        if (!contentResource) return;\n        viewer.addTiledImage({\n          error: function error(event) {\n            return reject(event);\n          },\n          fitBounds: _construct(OpenSeadragon.Rect, _toConsumableArray(canvasWorld.contentResourceToWorldCoordinates(contentResource))),\n          index: canvasWorld.layerIndexOfImageResource(contentResource),\n          opacity: canvasWorld.layerOpacityOfImageResource(contentResource),\n          success: function success(event) {\n            return resolve(event);\n          },\n          tileSource: tileSource\n        });\n      });\n    }\n\n    /** */\n  }, {\n    key: \"refreshTileProperties\",\n    value: function refreshTileProperties() {\n      var canvasWorld = this.props.canvasWorld;\n      var viewer = this.state.viewer;\n      var world = viewer.world;\n      var items = [];\n      for (var i = 0; i < world.getItemCount(); i += 1) {\n        items.push(world.getItemAt(i));\n      }\n      items.forEach(function (item, i) {\n        var contentResource = canvasWorld.contentResource(item.source['@id'] || item.source.id);\n        if (!contentResource) return;\n        var newIndex = canvasWorld.layerIndexOfImageResource(contentResource);\n        if (i !== newIndex) world.setItemIndex(item, newIndex);\n        item.setOpacity(canvasWorld.layerOpacityOfImageResource(contentResource));\n      });\n    }\n\n    /**\n     */\n  }, {\n    key: \"fitBounds\",\n    value: function fitBounds(x, y, w, h) {\n      var immediately = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n      var viewer = this.state.viewer;\n      viewer && viewer.viewport && viewer.viewport.fitBounds(new OpenSeadragon.Rect(x, y, w, h), immediately);\n    }\n\n    /**\n     * infoResponsesMatch - compares previous tileSources to current to determine\n     * whether a refresh of the OSD viewer is needed.\n     * @param  {Array} prevTileSources\n     * @return {Boolean}\n     */\n  }, {\n    key: \"infoResponsesMatch\",\n    value: function infoResponsesMatch(prevInfoResponses) {\n      var infoResponses = this.props.infoResponses;\n      if (infoResponses.length === 0 && prevInfoResponses.length === 0) return true;\n      if (infoResponses.length !== prevInfoResponses.length) return false;\n      return infoResponses.every(function (infoResponse, index) {\n        if (!prevInfoResponses[index]) {\n          return false;\n        }\n        if (!infoResponse.json || !prevInfoResponses[index].json) {\n          return false;\n        }\n        if (infoResponse.tokenServiceId !== prevInfoResponses[index].tokenServiceId) {\n          return false;\n        }\n        if (infoResponse.json['@id'] && infoResponse.json['@id'] === prevInfoResponses[index].json['@id']) {\n          return true;\n        }\n        if (infoResponse.json.id && infoResponse.json.id === prevInfoResponses[index].json.id) {\n          return true;\n        }\n        return false;\n      });\n    }\n\n    /**\n     * nonTiledImagedMatch - compares previous images to current to determin\n     * whether a refresh of the OSD viewer is needed\n     */\n  }, {\n    key: \"nonTiledImagedMatch\",\n    value: function nonTiledImagedMatch(prevNonTiledImages) {\n      var nonTiledImages = this.props.nonTiledImages;\n      if (nonTiledImages.length === 0 && prevNonTiledImages.length === 0) return true;\n      return nonTiledImages.some(function (image, index) {\n        if (!prevNonTiledImages[index]) {\n          return false;\n        }\n        if (image.id === prevNonTiledImages[index].id) {\n          return true;\n        }\n        return false;\n      });\n    }\n\n    /**\n     * zoomToWorld - zooms the viewer to the extent of the canvas world\n     */\n  }, {\n    key: \"zoomToWorld\",\n    value: function zoomToWorld() {\n      var immediately = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var canvasWorld = this.props.canvasWorld;\n      this.fitBounds.apply(this, _toConsumableArray(canvasWorld.worldBounds()).concat([immediately]));\n    }\n\n    /**\n     * Renders things\n     */\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n      var _this$props5 = this.props,\n        children = _this$props5.children,\n        label = _this$props5.label,\n        t = _this$props5.t,\n        windowId = _this$props5.windowId,\n        drawAnnotations = _this$props5.drawAnnotations;\n      var _this$state = this.state,\n        viewer = _this$state.viewer,\n        grabbing = _this$state.grabbing;\n      var enhancedChildren = Children.map(children, function (child) {\n        return /*#__PURE__*/cloneElement(child, {\n          zoomToWorld: _this4.zoomToWorld\n        });\n      });\n      return /*#__PURE__*/_jsxs(StyledSection, {\n        className: classNames(ns('osd-container')),\n        style: {\n          cursor: grabbing ? 'grabbing' : undefined\n        },\n        id: \"\".concat(windowId, \"-osd\"),\n        ref: this.ref,\n        \"aria-label\": t('item', {\n          label: label\n        }),\n        \"aria-live\": \"polite\",\n        children: [drawAnnotations && /*#__PURE__*/_jsx(AnnotationsOverlay, {\n          viewer: viewer,\n          windowId: windowId\n        }), enhancedChildren, /*#__PURE__*/_jsx(PluginHook, _objectSpread({\n          viewer: viewer\n        }, _objectSpread(_objectSpread({}, this.props), {}, {\n          children: null\n        })))]\n      });\n    }\n  }]);\n}(Component);\nOpenSeadragonViewer.defaultProps = {\n  children: null,\n  drawAnnotations: false,\n  infoResponses: [],\n  label: null,\n  nonTiledImages: [],\n  osdConfig: {},\n  viewerConfig: null\n};","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport { AnnotationsOverlay } from '../components/AnnotationsOverlay';\nimport * as actions from '../state/actions';\nimport { getWindow, getSearchAnnotationsForWindow, getCompanionWindowsForContent, getTheme, getConfig, getPresentAnnotationsOnSelectedCanvases, getSelectedAnnotationId, getCurrentCanvasWorld } from '../state/selectors';\n\n/**\n * mapStateToProps - used to hook up connect to action creators\n * @memberof Window\n * @private\n */\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    annotations: getPresentAnnotationsOnSelectedCanvases(state, {\n      windowId: windowId\n    }),\n    canvasWorld: getCurrentCanvasWorld(state, {\n      windowId: windowId\n    }),\n    drawAnnotations: getConfig(state).window.forceDrawAnnotations || getCompanionWindowsForContent(state, {\n      content: 'annotations',\n      windowId: windowId\n    }).length > 0,\n    drawSearchAnnotations: getConfig(state).window.forceDrawAnnotations || getCompanionWindowsForContent(state, {\n      content: 'search',\n      windowId: windowId\n    }).length > 0,\n    highlightAllAnnotations: getWindow(state, {\n      windowId: windowId\n    }).highlightAllAnnotations,\n    hoveredAnnotationIds: getWindow(state, {\n      windowId: windowId\n    }).hoveredAnnotationIds,\n    palette: getTheme(state).palette,\n    searchAnnotations: getSearchAnnotationsForWindow(state, {\n      windowId: windowId\n    }),\n    selectedAnnotationId: getSelectedAnnotationId(state, {\n      windowId: windowId\n    })\n  };\n};\n\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestListItem\n * @private\n */\nvar mapDispatchToProps = {\n  deselectAnnotation: actions.deselectAnnotation,\n  hoverAnnotation: actions.hoverAnnotation,\n  selectAnnotation: actions.selectAnnotation\n};\nvar enhance = compose(withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('AnnotationsOverlay'));\nexport default enhance(AnnotationsOverlay);","function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArray(r) { if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(t, e) { if (e && (\"object\" == typeof e || \"function\" == typeof e)) return e; if (void 0 !== e) throw new TypeError(\"Derived constructors may only return object or undefined\"); return _assertThisInitialized(t); }\nfunction _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); return e; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }\nfunction _inherits(t, e) { if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function\"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, \"prototype\", { writable: !1 }), e && _setPrototypeOf(t, e); }\nfunction _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\nimport { createRef, Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport isEqual from 'lodash/isEqual';\nimport debounce from 'lodash/debounce';\nimport flatten from 'lodash/flatten';\nimport sortBy from 'lodash/sortBy';\nimport xor from 'lodash/xor';\nimport OpenSeadragonCanvasOverlay from '../lib/OpenSeadragonCanvasOverlay';\nimport CanvasWorld from '../lib/CanvasWorld';\nimport CanvasAnnotationDisplay from '../lib/CanvasAnnotationDisplay';\n\n/**\n * Represents a OpenSeadragonViewer in the mirador workspace. Responsible for mounting\n * and rendering OSD.\n */\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var AnnotationsOverlay = /*#__PURE__*/function (_Component) {\n  /**\n   * @param {Object} props\n   */\n  function AnnotationsOverlay(props) {\n    var _this;\n    _classCallCheck(this, AnnotationsOverlay);\n    _this = _callSuper(this, AnnotationsOverlay, [props]);\n    _this.ref = /*#__PURE__*/createRef();\n    _this.osdCanvasOverlay = null;\n    // An initial value for the updateCanvas method\n    _this.updateCanvas = function () {};\n    _this.onUpdateViewport = _this.onUpdateViewport.bind(_this);\n    _this.onCanvasClick = _this.onCanvasClick.bind(_this);\n    _this.onCanvasMouseMove = debounce(_this.onCanvasMouseMove.bind(_this), 10);\n    _this.onCanvasExit = _this.onCanvasExit.bind(_this);\n    return _this;\n  }\n\n  /**\n   * React lifecycle event\n   */\n  _inherits(AnnotationsOverlay, _Component);\n  return _createClass(AnnotationsOverlay, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.initializeViewer();\n    }\n\n    /**\n     * When the tileSources change, make sure to close the OSD viewer.\n     * When the annotations change, reset the updateCanvas method to make sure\n     * they are added.\n     * When the viewport state changes, pan or zoom the OSD viewer as appropriate\n     */\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props = this.props,\n        drawAnnotations = _this$props.drawAnnotations,\n        drawSearchAnnotations = _this$props.drawSearchAnnotations,\n        annotations = _this$props.annotations,\n        searchAnnotations = _this$props.searchAnnotations,\n        hoveredAnnotationIds = _this$props.hoveredAnnotationIds,\n        selectedAnnotationId = _this$props.selectedAnnotationId,\n        highlightAllAnnotations = _this$props.highlightAllAnnotations,\n        viewer = _this$props.viewer;\n      this.initializeViewer();\n      var annotationsUpdated = !AnnotationsOverlay.annotationsMatch(annotations, prevProps.annotations);\n      var searchAnnotationsUpdated = !AnnotationsOverlay.annotationsMatch(searchAnnotations, prevProps.searchAnnotations);\n      var hoveredAnnotationsUpdated = xor(hoveredAnnotationIds, prevProps.hoveredAnnotationIds).length > 0;\n      if (this.osdCanvasOverlay && hoveredAnnotationsUpdated) {\n        if (hoveredAnnotationIds.length > 0) {\n          this.osdCanvasOverlay.canvasDiv.style.cursor = 'pointer';\n        } else {\n          this.osdCanvasOverlay.canvasDiv.style.cursor = '';\n        }\n      }\n      var selectedAnnotationsUpdated = selectedAnnotationId !== prevProps.selectedAnnotationId;\n      var redrawAnnotations = drawAnnotations !== prevProps.drawAnnotations || drawSearchAnnotations !== prevProps.drawSearchAnnotations || highlightAllAnnotations !== prevProps.highlightAllAnnotations;\n      if (searchAnnotationsUpdated || annotationsUpdated || selectedAnnotationsUpdated || hoveredAnnotationsUpdated || redrawAnnotations) {\n        this.updateCanvas = this.canvasUpdateCallback();\n        viewer.forceRedraw();\n      }\n    }\n\n    /**\n     */\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var viewer = this.props.viewer;\n      this.onCanvasMouseMove.cancel();\n      viewer.removeHandler('canvas-click', this.onCanvasClick);\n      viewer.removeHandler('canvas-exit', this.onCanvasExit);\n      viewer.removeHandler('update-viewport', this.onUpdateViewport);\n      viewer.removeHandler('mouse-move', this.onCanvasMouseMove);\n    }\n\n    /** */\n  }, {\n    key: \"onCanvasClick\",\n    value: function onCanvasClick(event) {\n      var _this2 = this;\n      var canvasWorld = this.props.canvasWorld;\n      var webPosition = event.position,\n        viewport = event.eventSource.viewport;\n      var point = viewport.pointFromPixel(webPosition);\n      var canvas = canvasWorld.canvasAtPoint(point);\n      if (!canvas) return;\n      var _canvasWorld$canvasTo = canvasWorld.canvasToWorldCoordinates(canvas.id),\n        _canvasWorld$canvasTo2 = _slicedToArray(_canvasWorld$canvasTo, 4),\n        _canvasX = _canvasWorld$canvasTo2[0],\n        _canvasY = _canvasWorld$canvasTo2[1],\n        canvasWidth = _canvasWorld$canvasTo2[2],\n        canvasHeight // eslint-disable-line no-unused-vars\n        = _canvasWorld$canvasTo2[3];\n\n      // get all the annotations that contain the click\n      var annos = this.annotationsAtPoint(canvas, point);\n      if (annos.length > 0) {\n        event.preventDefaultAction = true; // eslint-disable-line no-param-reassign\n      }\n      if (annos.length === 1) {\n        this.toggleAnnotation(annos[0].id);\n      } else if (annos.length > 0) {\n        /**\n         * Try to find the \"right\" annotation to select after a click.\n         *\n         * This is perhaps a naive method, but seems to deal with rectangles and SVG shapes:\n         *\n         * - figure out how many points around a circle are inside the annotation shape\n         * - if there's a shape with the fewest interior points, it's probably the one\n         *       with the closest boundary?\n         * - if there's a tie, make the circle bigger and try again.\n         */\n        var annosWithClickScore = function annosWithClickScore(radius) {\n          var degreesToRadians = Math.PI / 180;\n          return function (anno) {\n            var score = 0;\n            for (var degrees = 0; degrees < 360; degrees += 1) {\n              var x = Math.cos(degrees * degreesToRadians) * radius + point.x;\n              var y = Math.sin(degrees * degreesToRadians) * radius + point.y;\n              if (_this2.isAnnotationAtPoint(anno, canvas, {\n                x: x,\n                y: y\n              })) score += 1;\n            }\n            return {\n              anno: anno,\n              score: score\n            };\n          };\n        };\n        var annosWithScore = [];\n        var radius = 1;\n        annosWithScore = sortBy(annos.map(annosWithClickScore(radius)), 'score');\n        while (radius < Math.max(canvasWidth, canvasHeight) && annosWithScore[0].score === annosWithScore[1].score) {\n          radius *= 2;\n          annosWithScore = sortBy(annos.map(annosWithClickScore(radius)), 'score');\n        }\n        this.toggleAnnotation(annosWithScore[0].anno.id);\n      }\n    }\n\n    /** */\n  }, {\n    key: \"onCanvasMouseMove\",\n    value: function onCanvasMouseMove(event) {\n      var _this$props2 = this.props,\n        annotations = _this$props2.annotations,\n        canvasWorld = _this$props2.canvasWorld,\n        hoverAnnotation = _this$props2.hoverAnnotation,\n        hoveredAnnotationIds = _this$props2.hoveredAnnotationIds,\n        searchAnnotations = _this$props2.searchAnnotations,\n        viewer = _this$props2.viewer,\n        windowId = _this$props2.windowId;\n      if (annotations.length === 0 && searchAnnotations.length === 0) return;\n      var webPosition = event.position;\n      var point = viewer.viewport.pointFromPixel(webPosition);\n      var canvas = canvasWorld.canvasAtPoint(point);\n      if (!canvas) {\n        hoverAnnotation(windowId, []);\n        return;\n      }\n      var annos = this.annotationsAtPoint(canvas, point);\n      if (xor(hoveredAnnotationIds, annos.map(function (a) {\n        return a.id;\n      })).length > 0) {\n        hoverAnnotation(windowId, annos.map(function (a) {\n          return a.id;\n        }));\n      }\n    }\n\n    /** If the cursor leaves the canvas, wipe out highlights */\n  }, {\n    key: \"onCanvasExit\",\n    value: function onCanvasExit(event) {\n      var _this$props3 = this.props,\n        hoverAnnotation = _this$props3.hoverAnnotation,\n        windowId = _this$props3.windowId;\n\n      // a move event may be queued up by the debouncer\n      this.onCanvasMouseMove.cancel();\n      hoverAnnotation(windowId, []);\n    }\n\n    /**\n     * onUpdateViewport - fires during OpenSeadragon render method.\n     */\n  }, {\n    key: \"onUpdateViewport\",\n    value: function onUpdateViewport(event) {\n      this.updateCanvas();\n    }\n\n    /** @private */\n  }, {\n    key: \"initializeViewer\",\n    value: function initializeViewer() {\n      var viewer = this.props.viewer;\n      if (!viewer) return;\n      if (this.osdCanvasOverlay) return;\n      this.osdCanvasOverlay = new OpenSeadragonCanvasOverlay(viewer, this.ref);\n      viewer.addHandler('canvas-click', this.onCanvasClick);\n      viewer.addHandler('canvas-exit', this.onCanvasExit);\n      viewer.addHandler('update-viewport', this.onUpdateViewport);\n      viewer.addHandler('mouse-move', this.onCanvasMouseMove);\n      this.updateCanvas = this.canvasUpdateCallback();\n    }\n\n    /** */\n  }, {\n    key: \"canvasUpdateCallback\",\n    value: function canvasUpdateCallback() {\n      var _this3 = this;\n      return function () {\n        _this3.osdCanvasOverlay.clear();\n        _this3.osdCanvasOverlay.resize();\n        _this3.osdCanvasOverlay.canvasUpdate(_this3.renderAnnotations.bind(_this3));\n      };\n    }\n\n    /** @private */\n  }, {\n    key: \"isAnnotationAtPoint\",\n    value: function isAnnotationAtPoint(resource, canvas, point) {\n      var canvasWorld = this.props.canvasWorld;\n      var _canvasWorld$canvasTo3 = canvasWorld.canvasToWorldCoordinates(canvas.id),\n        _canvasWorld$canvasTo4 = _slicedToArray(_canvasWorld$canvasTo3, 2),\n        canvasX = _canvasWorld$canvasTo4[0],\n        canvasY = _canvasWorld$canvasTo4[1];\n      var relativeX = point.x - canvasX;\n      var relativeY = point.y - canvasY;\n      if (resource.svgSelector) {\n        var context = this.osdCanvasOverlay.context2d;\n        var _CanvasAnnotationDisp = new CanvasAnnotationDisplay({\n            resource: resource\n          }),\n          svgPaths = _CanvasAnnotationDisp.svgPaths;\n        return _toConsumableArray(svgPaths).some(function (path) {\n          return context.isPointInPath(new Path2D(path.attributes.d.nodeValue), relativeX, relativeY);\n        });\n      }\n      if (resource.fragmentSelector) {\n        var _resource$fragmentSel = _slicedToArray(resource.fragmentSelector, 4),\n          x = _resource$fragmentSel[0],\n          y = _resource$fragmentSel[1],\n          w = _resource$fragmentSel[2],\n          h = _resource$fragmentSel[3];\n        return x <= relativeX && relativeX <= x + w && y <= relativeY && relativeY <= y + h;\n      }\n      return false;\n    }\n\n    /** @private */\n  }, {\n    key: \"annotationsAtPoint\",\n    value: function annotationsAtPoint(canvas, point) {\n      var _this4 = this;\n      var _this$props4 = this.props,\n        annotations = _this$props4.annotations,\n        searchAnnotations = _this$props4.searchAnnotations;\n      var lists = [].concat(_toConsumableArray(annotations), _toConsumableArray(searchAnnotations));\n      var annos = flatten(lists.map(function (l) {\n        return l.resources;\n      })).filter(function (resource) {\n        if (canvas.id !== resource.targetId) return false;\n        return _this4.isAnnotationAtPoint(resource, canvas, point);\n      });\n      return annos;\n    }\n\n    /** */\n  }, {\n    key: \"toggleAnnotation\",\n    value: function toggleAnnotation(id) {\n      var _this$props5 = this.props,\n        selectedAnnotationId = _this$props5.selectedAnnotationId,\n        selectAnnotation = _this$props5.selectAnnotation,\n        deselectAnnotation = _this$props5.deselectAnnotation,\n        windowId = _this$props5.windowId;\n      if (selectedAnnotationId === id) {\n        deselectAnnotation(windowId, id);\n      } else {\n        selectAnnotation(windowId, id);\n      }\n    }\n\n    /**\n     * annotationsToContext - converts anontations to a canvas context\n     */\n  }, {\n    key: \"annotationsToContext\",\n    value: function annotationsToContext(annotations, palette) {\n      var _this$props6 = this.props,\n        highlightAllAnnotations = _this$props6.highlightAllAnnotations,\n        hoveredAnnotationIds = _this$props6.hoveredAnnotationIds,\n        selectedAnnotationId = _this$props6.selectedAnnotationId,\n        canvasWorld = _this$props6.canvasWorld,\n        viewer = _this$props6.viewer;\n      var context = this.osdCanvasOverlay.context2d;\n      var zoomRatio = viewer.viewport.getZoom(true) / viewer.viewport.getMaxZoom();\n      annotations.forEach(function (annotation) {\n        annotation.resources.forEach(function (resource) {\n          if (!canvasWorld.canvasIds.includes(resource.targetId)) return;\n          var offset = canvasWorld.offsetByCanvas(resource.targetId);\n          var canvasAnnotationDisplay = new CanvasAnnotationDisplay({\n            hovered: hoveredAnnotationIds.includes(resource.id),\n            offset: offset,\n            palette: _objectSpread(_objectSpread({}, palette), {}, {\n              \"default\": _objectSpread(_objectSpread({}, palette[\"default\"]), !highlightAllAnnotations && palette.hidden)\n            }),\n            resource: resource,\n            selected: selectedAnnotationId === resource.id,\n            zoomRatio: zoomRatio\n          });\n          canvasAnnotationDisplay.toContext(context);\n        });\n      });\n    }\n\n    /** */\n  }, {\n    key: \"renderAnnotations\",\n    value: function renderAnnotations() {\n      var _this$props7 = this.props,\n        annotations = _this$props7.annotations,\n        drawAnnotations = _this$props7.drawAnnotations,\n        drawSearchAnnotations = _this$props7.drawSearchAnnotations,\n        searchAnnotations = _this$props7.searchAnnotations,\n        palette = _this$props7.palette;\n      if (drawSearchAnnotations) {\n        this.annotationsToContext(searchAnnotations, palette.search);\n      }\n      if (drawAnnotations) {\n        this.annotationsToContext(annotations, palette.annotations);\n      }\n    }\n\n    /**\n     * Renders things\n     */\n  }, {\n    key: \"render\",\n    value: function render() {\n      var viewer = this.props.viewer;\n      if (!viewer) return null;\n      return /*#__PURE__*/ReactDOM.createPortal(/*#__PURE__*/_jsx(\"div\", {\n        ref: this.ref,\n        style: {\n          height: '100%',\n          left: 0,\n          position: 'absolute',\n          top: 0,\n          width: '100%'\n        },\n        children: /*#__PURE__*/_jsx(\"canvas\", {})\n      }), viewer.canvas);\n    }\n  }], [{\n    key: \"annotationsMatch\",\n    value:\n    /**\n     * annotationsMatch - compares previous annotations to current to determine\n     * whether to add a new updateCanvas method to draw annotations\n     * @param  {Array} currentAnnotations\n     * @param  {Array} prevAnnotations\n     * @return {Boolean}\n     */\n    function annotationsMatch(currentAnnotations, prevAnnotations) {\n      if (!currentAnnotations && !prevAnnotations) return true;\n      if (currentAnnotations && !prevAnnotations || !currentAnnotations && prevAnnotations) return false;\n      if (currentAnnotations.length === 0 && prevAnnotations.length === 0) return true;\n      if (currentAnnotations.length !== prevAnnotations.length) return false;\n      return currentAnnotations.every(function (annotation, index) {\n        var newIds = annotation.resources.map(function (r) {\n          return r.id;\n        });\n        var prevIds = prevAnnotations[index].resources.map(function (r) {\n          return r.id;\n        });\n        if (newIds.length === 0 && prevIds.length === 0) return true;\n        if (newIds.length !== prevIds.length) return false;\n        if (annotation.id === prevAnnotations[index].id && isEqual(newIds, prevIds)) {\n          return true;\n        }\n        return false;\n      });\n    }\n  }]);\n}(Component);\nAnnotationsOverlay.defaultProps = {\n  annotations: [],\n  deselectAnnotation: function deselectAnnotation() {},\n  drawAnnotations: true,\n  drawSearchAnnotations: true,\n  highlightAllAnnotations: false,\n  hoverAnnotation: function hoverAnnotation() {},\n  hoveredAnnotationIds: [],\n  palette: {},\n  searchAnnotations: [],\n  selectAnnotation: function selectAnnotation() {},\n  selectedAnnotationId: undefined,\n  viewer: null\n};","var baseFlatten = require('./_baseFlatten'),\n    baseOrderBy = require('./_baseOrderBy'),\n    baseRest = require('./_baseRest'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Creates an array of elements, sorted in ascending order by the results of\n * running each element in a collection thru each iteratee. This method\n * performs a stable sort, that is, it preserves the original sort order of\n * equal elements. The iteratees are invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {...(Function|Function[])} [iteratees=[_.identity]]\n *  The iteratees to sort by.\n * @returns {Array} Returns the new sorted array.\n * @example\n *\n * var users = [\n *   { 'user': 'fred',   'age': 48 },\n *   { 'user': 'barney', 'age': 36 },\n *   { 'user': 'fred',   'age': 30 },\n *   { 'user': 'barney', 'age': 34 }\n * ];\n *\n * _.sortBy(users, [function(o) { return o.user; }]);\n * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 30]]\n *\n * _.sortBy(users, ['user', 'age']);\n * // => objects for [['barney', 34], ['barney', 36], ['fred', 30], ['fred', 48]]\n */\nvar sortBy = baseRest(function(collection, iteratees) {\n  if (collection == null) {\n    return [];\n  }\n  var length = iteratees.length;\n  if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n    iteratees = [];\n  } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n    iteratees = [iteratees[0]];\n  }\n  return baseOrderBy(collection, baseFlatten(iteratees, 1), []);\n});\n\nmodule.exports = sortBy;\n","var arrayMap = require('./_arrayMap'),\n    baseGet = require('./_baseGet'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    baseSortBy = require('./_baseSortBy'),\n    baseUnary = require('./_baseUnary'),\n    compareMultiple = require('./_compareMultiple'),\n    identity = require('./identity'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `_.orderBy` without param guards.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n * @param {string[]} orders The sort orders of `iteratees`.\n * @returns {Array} Returns the new sorted array.\n */\nfunction baseOrderBy(collection, iteratees, orders) {\n  if (iteratees.length) {\n    iteratees = arrayMap(iteratees, function(iteratee) {\n      if (isArray(iteratee)) {\n        return function(value) {\n          return baseGet(value, iteratee.length === 1 ? iteratee[0] : iteratee);\n        }\n      }\n      return iteratee;\n    });\n  } else {\n    iteratees = [identity];\n  }\n\n  var index = -1;\n  iteratees = arrayMap(iteratees, baseUnary(baseIteratee));\n\n  var result = baseMap(collection, function(value, key, collection) {\n    var criteria = arrayMap(iteratees, function(iteratee) {\n      return iteratee(value);\n    });\n    return { 'criteria': criteria, 'index': ++index, 'value': value };\n  });\n\n  return baseSortBy(result, function(object, other) {\n    return compareMultiple(object, other, orders);\n  });\n}\n\nmodule.exports = baseOrderBy;\n","var baseEach = require('./_baseEach'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nmodule.exports = baseMap;\n","/**\n * The base implementation of `_.sortBy` which uses `comparer` to define the\n * sort order of `array` and replaces criteria objects with their corresponding\n * values.\n *\n * @private\n * @param {Array} array The array to sort.\n * @param {Function} comparer The function to define sort order.\n * @returns {Array} Returns `array`.\n */\nfunction baseSortBy(array, comparer) {\n  var length = array.length;\n\n  array.sort(comparer);\n  while (length--) {\n    array[length] = array[length].value;\n  }\n  return array;\n}\n\nmodule.exports = baseSortBy;\n","var compareAscending = require('./_compareAscending');\n\n/**\n * Used by `_.orderBy` to compare multiple properties of a value to another\n * and stable sort them.\n *\n * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n * of corresponding values.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {boolean[]|string[]} orders The order to sort by for each property.\n * @returns {number} Returns the sort order indicator for `object`.\n */\nfunction compareMultiple(object, other, orders) {\n  var index = -1,\n      objCriteria = object.criteria,\n      othCriteria = other.criteria,\n      length = objCriteria.length,\n      ordersLength = orders.length;\n\n  while (++index < length) {\n    var result = compareAscending(objCriteria[index], othCriteria[index]);\n    if (result) {\n      if (index >= ordersLength) {\n        return result;\n      }\n      var order = orders[index];\n      return result * (order == 'desc' ? -1 : 1);\n    }\n  }\n  // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n  // that causes it, under certain circumstances, to provide the same value for\n  // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n  // for more details.\n  //\n  // This also ensures a stable sort in V8 and other engines.\n  // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n  return object.index - other.index;\n}\n\nmodule.exports = compareMultiple;\n","var isSymbol = require('./isSymbol');\n\n/**\n * Compares values to sort them in ascending order.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {number} Returns the sort order indicator for `value`.\n */\nfunction compareAscending(value, other) {\n  if (value !== other) {\n    var valIsDefined = value !== undefined,\n        valIsNull = value === null,\n        valIsReflexive = value === value,\n        valIsSymbol = isSymbol(value);\n\n    var othIsDefined = other !== undefined,\n        othIsNull = other === null,\n        othIsReflexive = other === other,\n        othIsSymbol = isSymbol(other);\n\n    if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n        (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n        (valIsNull && othIsDefined && othIsReflexive) ||\n        (!valIsDefined && othIsReflexive) ||\n        !valIsReflexive) {\n      return 1;\n    }\n    if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n        (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n        (othIsNull && valIsDefined && valIsReflexive) ||\n        (!othIsDefined && valIsReflexive) ||\n        !othIsReflexive) {\n      return -1;\n    }\n  }\n  return 0;\n}\n\nmodule.exports = compareAscending;\n","var eq = require('./eq'),\n    isArrayLike = require('./isArrayLike'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject');\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n","var arrayFilter = require('./_arrayFilter'),\n    baseRest = require('./_baseRest'),\n    baseXor = require('./_baseXor'),\n    isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Creates an array of unique values that is the\n * [symmetric difference](https://en.wikipedia.org/wiki/Symmetric_difference)\n * of the given arrays. The order of result values is determined by the order\n * they occur in the arrays.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of filtered values.\n * @see _.difference, _.without\n * @example\n *\n * _.xor([2, 1], [2, 3]);\n * // => [1, 3]\n */\nvar xor = baseRest(function(arrays) {\n  return baseXor(arrayFilter(arrays, isArrayLikeObject));\n});\n\nmodule.exports = xor;\n","var baseDifference = require('./_baseDifference'),\n    baseFlatten = require('./_baseFlatten'),\n    baseUniq = require('./_baseUniq');\n\n/**\n * The base implementation of methods like `_.xor`, without support for\n * iteratee shorthands, that accepts an array of arrays to inspect.\n *\n * @private\n * @param {Array} arrays The arrays to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of values.\n */\nfunction baseXor(arrays, iteratee, comparator) {\n  var length = arrays.length;\n  if (length < 2) {\n    return length ? baseUniq(arrays[0]) : [];\n  }\n  var index = -1,\n      result = Array(length);\n\n  while (++index < length) {\n    var array = arrays[index],\n        othIndex = -1;\n\n    while (++othIndex < length) {\n      if (othIndex != index) {\n        result[index] = baseDifference(result[index] || array, arrays[othIndex], iteratee, comparator);\n      }\n    }\n  }\n  return baseUniq(baseFlatten(result, 1), iteratee, comparator);\n}\n\nmodule.exports = baseXor;\n","function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport OpenSeadragon from 'openseadragon';\n\n/**\n * OpenSeadragonCanvasOverlay - adapted from https://github.com/altert/OpenSeadragonCanvasOverlay\n * used rather than an \"onRedraw\" function we tap into our own method. Existing\n * repository is not published as an npm package.\n * Code ported from https://github.com/altert/OpenSeadragonCanvasOverlay\n * carries a BSD 3-Clause license originally authored by @altert from\n * https://github.com/altert/OpenseadragonFabricjsOverlay\n */\nvar OpenSeadragonCanvasOverlay = /*#__PURE__*/function () {\n  /**\n   * constructor - sets up the Canvas overlay container\n   */\n  function OpenSeadragonCanvasOverlay(viewer, ref) {\n    _classCallCheck(this, OpenSeadragonCanvasOverlay);\n    this.viewer = viewer;\n    this.ref = ref;\n    this.containerWidth = 0;\n    this.containerHeight = 0;\n    this.imgAspectRatio = 1;\n  }\n\n  /** */\n  return _createClass(OpenSeadragonCanvasOverlay, [{\n    key: \"canvas\",\n    get: function get() {\n      return this.canvasDiv.firstElementChild;\n    }\n\n    /** */\n  }, {\n    key: \"canvasDiv\",\n    get: function get() {\n      return this.ref.current;\n    }\n\n    /** */\n  }, {\n    key: \"context2d\",\n    get: function get() {\n      return this.canvas.getContext('2d');\n    }\n\n    /** */\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.context2d.clearRect(0, 0, this.containerWidth, this.containerHeight);\n    }\n\n    /**\n     * resize - resizes the added Canvas overlay.\n     */\n  }, {\n    key: \"resize\",\n    value: function resize() {\n      if (this.containerWidth !== this.viewer.container.clientWidth) {\n        this.containerWidth = this.viewer.container.clientWidth;\n        this.canvasDiv.setAttribute('width', this.containerWidth);\n        this.canvas.setAttribute('width', this.containerWidth);\n      }\n      if (this.containerHeight !== this.viewer.container.clientHeight) {\n        this.containerHeight = this.viewer.container.clientHeight;\n        this.canvasDiv.setAttribute('height', this.containerHeight);\n        this.canvas.setAttribute('height', this.containerHeight);\n      }\n      this.viewportOrigin = new OpenSeadragon.Point(0, 0);\n      var boundsRect = this.viewer.viewport.getBoundsNoRotateWithMargins(true);\n      this.viewportOrigin.x = boundsRect.x;\n      this.viewportOrigin.y = boundsRect.y * this.imgAspectRatio;\n      this.viewportWidth = boundsRect.width;\n      this.viewportHeight = boundsRect.height * this.imgAspectRatio;\n      var image1 = this.viewer.world.getItemAt(0);\n      if (!image1) return;\n      this.imgWidth = image1.source.dimensions.x;\n      this.imgHeight = image1.source.dimensions.y;\n      this.imgAspectRatio = this.imgWidth / this.imgHeight;\n    }\n\n    /**\n     * canvasUpdate - sets up the dimensions for the canvas update to mimick image\n     * 0 dimensions. Then call provided update function.\n     * @param {Function} update\n     */\n  }, {\n    key: \"canvasUpdate\",\n    value: function canvasUpdate(update) {\n      var viewportZoom = this.viewer.viewport.getZoom(true);\n      var image1 = this.viewer.world.getItemAt(0);\n      if (!image1) return;\n      var zoom = image1.viewportToImageZoom(viewportZoom);\n      var x = (this.viewportOrigin.x / this.imgWidth - this.viewportOrigin.x) / this.viewportWidth * this.containerWidth;\n      var y = (this.viewportOrigin.y / this.imgHeight - this.viewportOrigin.y) / this.viewportHeight * this.containerHeight;\n      if (this.clearBeforeRedraw) this.clear();\n      this.context2d.translate(x, y);\n      this.context2d.scale(zoom, zoom);\n      var center = this.viewer.viewport.getCenter();\n      var flip = this.viewer.viewport.getFlip();\n      if (flip) {\n        this.context2d.translate(center.x * 2, 0);\n        this.context2d.scale(-1, 1);\n      }\n      var rotation = this.viewer.viewport.getRotation();\n      if (rotation !== 0) {\n        this.context2d.translate(center.x, center.y);\n        this.context2d.rotate(rotation * Math.PI / 180);\n        this.context2d.translate(-1 * center.x, -1 * center.y);\n      }\n      update();\n      this.context2d.setTransform(1, 0, 0, 1, 0, 0);\n    }\n  }]);\n}();\nexport { OpenSeadragonCanvasOverlay as default };","function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _iterableToArray(r) { if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/**\n * CanvasAnnotationDisplay - class used to display a SVG and fragment based\n * annotations.\n */\nvar CanvasAnnotationDisplay = /*#__PURE__*/function () {\n  /** */\n  function CanvasAnnotationDisplay(_ref) {\n    var resource = _ref.resource,\n      palette = _ref.palette,\n      zoomRatio = _ref.zoomRatio,\n      offset = _ref.offset,\n      selected = _ref.selected,\n      hovered = _ref.hovered;\n    _classCallCheck(this, CanvasAnnotationDisplay);\n    this.resource = resource;\n    this.palette = palette;\n    this.zoomRatio = zoomRatio;\n    this.offset = offset;\n    this.selected = selected;\n    this.hovered = hovered;\n  }\n\n  /** */\n  return _createClass(CanvasAnnotationDisplay, [{\n    key: \"toContext\",\n    value: function toContext(context) {\n      this.context = context;\n      if (this.resource.svgSelector) {\n        this.svgContext();\n      } else if (this.resource.fragmentSelector) {\n        this.fragmentContext();\n      }\n    }\n\n    /** */\n  }, {\n    key: \"svgString\",\n    get: function get() {\n      return this.resource.svgSelector.value;\n    }\n\n    /** */\n  }, {\n    key: \"svgContext\",\n    value: function svgContext() {\n      var _this = this;\n      var currentPalette;\n      if (this.hovered) {\n        currentPalette = this.palette.hovered;\n      } else if (this.selected) {\n        currentPalette = this.palette.selected;\n      } else {\n        currentPalette = this.palette[\"default\"];\n      }\n      if (currentPalette.globalAlpha === 0) return;\n      _toConsumableArray(this.svgPaths).forEach(function (element) {\n        /**\n         *  Note: Path2D is not supported in IE11.\n         *  TODO: Support multi canvas offset\n         *  One example: https://developer.mozilla.org/en-US/docs/Web/API/Path2D/addPath\n         */\n        _this.context.save();\n        _this.context.translate(_this.offset.x, _this.offset.y);\n        var p = new Path2D(element.attributes.d.nodeValue);\n\n        // Setup styling from SVG -> Canvas\n        _this.context.strokeStyle = _this.color;\n        if (element.attributes['stroke-dasharray']) {\n          _this.context.setLineDash(element.attributes['stroke-dasharray'].nodeValue.split(','));\n        }\n        var svgToCanvasMap = {\n          fill: 'fillStyle',\n          stroke: 'strokeStyle',\n          'stroke-dashoffset': 'lineDashOffset',\n          'stroke-linecap': 'lineCap',\n          'stroke-linejoin': 'lineJoin',\n          'stroke-miterlimit': 'miterlimit',\n          'stroke-width': 'lineWidth'\n        };\n        Object.keys(svgToCanvasMap).forEach(function (key) {\n          if (element.attributes[key]) {\n            _this.context[svgToCanvasMap[key]] = element.attributes[key].nodeValue;\n          }\n        });\n\n        // Resize the stroke based off of the zoomRatio (currentZoom / maxZoom)\n        _this.context.lineWidth /= _this.zoomRatio;\n\n        // Reset the color if it is selected or hovered on\n        if (_this.selected || _this.hovered) {\n          _this.context.strokeStyle = currentPalette.strokeStyle || currentPalette.fillStyle;\n        }\n        if (element.attributes['stroke-opacity']) {\n          _this.context.globalAlpha = currentPalette.globalAlpha * element.attributes['stroke-opacity'].nodeValue;\n        } else {\n          _this.context.globalAlpha = currentPalette.globalAlpha;\n        }\n        _this.context.stroke(p);\n\n        // Wait to set the fill, so we can adjust the globalAlpha value if we need to\n        if (element.attributes.fill && element.attributes.fill.nodeValue !== 'none') {\n          if (element.attributes['fill-opacity']) {\n            _this.context.globalAlpha = currentPalette.globalAlpha * element.attributes['fill-opacity'].nodeValue;\n          } else {\n            _this.context.globalAlpha = currentPalette.globalAlpha;\n          }\n          _this.context.fill(p);\n        }\n        _this.context.restore();\n      });\n    }\n\n    /** */\n  }, {\n    key: \"fragmentContext\",\n    value: function fragmentContext() {\n      var _this2 = this;\n      var fragment = this.resource.fragmentSelector;\n      fragment[0] += this.offset.x;\n      fragment[1] += this.offset.y;\n      var currentPalette;\n      if (this.selected) {\n        currentPalette = this.palette.selected;\n      } else if (this.hovered) {\n        currentPalette = this.palette.hovered;\n      } else {\n        currentPalette = this.palette[\"default\"];\n      }\n      this.context.save();\n      Object.keys(currentPalette).forEach(function (key) {\n        _this2.context[key] = currentPalette[key];\n      });\n      if (currentPalette.globalAlpha === 0) return;\n      if (currentPalette.fillStyle) {\n        var _this$context;\n        (_this$context = this.context).fillRect.apply(_this$context, _toConsumableArray(fragment));\n      } else {\n        var _this$context2;\n        this.context.lineWidth = 1 / this.zoomRatio;\n        (_this$context2 = this.context).strokeRect.apply(_this$context2, _toConsumableArray(fragment));\n      }\n      this.context.restore();\n    }\n\n    /** */\n  }, {\n    key: \"svgPaths\",\n    get: function get() {\n      var parser = new DOMParser();\n      var xmlDoc = parser.parseFromString(this.svgString, 'text/xml');\n      return xmlDoc.getElementsByTagName('path');\n    }\n  }]);\n}();\nexport { CanvasAnnotationDisplay as default };"],"names":[],"version":3,"file":"OpenSeadragonViewer.570eae9d.js.map","sourceRoot":"/__parcel_source_root/"}